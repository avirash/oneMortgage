{
 "lender": "Virginmoney",
 "logo": "virginmoney",
 "domain": "intermediaries.virginmoney.com",
 "affordability": "https://intermediaries.virginmoney.com/tools/affordability-calculator/loan/9d60fb80-eec2-4b5d-9431-a89a604c8c0f",
 "mapping": {
   "waitFor": 500,
   "typeOfOwnerShip": {
     "css": "[name='ApplicationType']",
     "logic": "('@value' === 'Help to Buy') ? 'Help to Buy Equity Loan' : (['Shared Equity','Other'].includes('@value')) ? 'Residential' : 'Custom Build'",
     "Residential": {
       "css": "#ApplicationTypeResidential",
       "methodOfRepayment": {
         "css": "[name='RepaymentMethod']",
         "logic": "('@value' === 'Capital and interest') ? 'Repayment' : ('@value'.includes('Interest only')) ?  'Interest Only' : 'Part & Part'"
       },
       "mortgageTermYears": {
         "css": "#LoanTerm"
       },
       "propertyValue": {
         "css": "#PropertyValue"
       },
       "loanValue": {
         "css": "#LoanRequired"
       },
       "requiredInterest": {
         "css": "#IOLoanRequired",
         "logic": "parseInt(input[propertyValue]) - parseInt(input[loanValue])"
       }
     },
     "Help to Buy Equity Loan": {
       "css": "#ApplicationTypeHTBEquity",
       "mortgageTermYears": {
         "css": "#LoanTerm"
       },
       "propertyValue": {
         "css": "#PropertyValue"
       },
       "equityLoan": {
         "css": "#HelpToBuyAmount"
       },
       "loanValue": {
         "css": "#LoanRequired"
       }
     },
     "Custom Build": {
       "css": "#ApplicationTypeCustomBuild",
       "mortgageTermYears": {
         "css": "#LoanTerm"
       },
       "propertyValue": {
         "css": "#PropertyValue"
       },
       "loanValue": {
         "css": "#LoanRequired"
       }
     },
     "Shared Ownership": {
       "css": "#ApplicationTypeSharedOwnership",
       "mortgageTermYears": {
         "css": "#LoanTerm"
       },
       "propertyValue": {
         "css": "#PropertyValue"
       },
       "loanValue": {
         "css": "#LoanRequired"
       },
       "percentageShareToPurchased": {
         "css": "#PercentageShare"
       }
     }
   },
   "click1": "#affCalcForm > div.formContents > div.last > span > input",

   "numOfApplying": {
     "css": "[name='NumberOfApplicants']",
     "logic": "(@value === 1) ? 'Single': 'Joint'"
   },
   "numOfdependants": {
     "css": "#Dependants",
     "logic": "parseInt(input[childUnder5]) + parseInt(input[childUnder11]) + parseInt(input[childUnder17]) + parseInt(input[childOver18])",
     "new": true
   },
   "applicantAge1": {
     "css": "#Age0",
     "logic": "(new Date().getFullYear() - parseInt(input[yearOfBirth1]))",
     "new": true
   },
   "employmentStatus1": {
     "css": "#Employment0",
      "Employed": {
        "annualIncome1": {
          "css": "#Applicant0_GrossAnnual"
        },
        "overtimeBonusComission1": {
          "css": "#Applicant0_OvertimeAnnual",
          "logic": "input[annualBonus1] + input[totalOvertimeAnnually1] + input[totalCommissionAnnually1]",
          "new": true
        }
      },
      "Self-employed": {
        "annualIncome1": {
          "css": "#Applicant0_NetProfitMostRecent"
        }
      },
      "Retired": {
        "annualIncome1": {
          "css": "#Applicant0_GrossAnnual"
        }
      },
      "On Contract": {
        "annualIncome1": {
          "css": "#Applicant0_GrossAnnual"
        }
      },
      "Not Employed": {
        "css": "#Applicant0_GrossAnnual",
        "logic": "input[secondJob1] + input[occupationalPension1] + input[drawdownOnPensionFund1] + input[dividendIncome1] + input[investmentIncome1] + input[maintenancePayments1] + input[rentalIncome1] + input[fosteringIncome1] + input[otherIncome1]"
      }
   },
   "applicantAge2": {
     "css": "#Age1",
     "logic": "(new Date().getFullYear() - parseInt(input[yearOfBirth2]))",
     "new": true
   },
   "employmentStatus2": {
     "css": "#Employment1",
      "Employed": {
        "annualIncome2": {
          "css": "#Applicant1_GrossAnnual"
        },
        "overtimeBonusComission2": {
          "css": "#Applicant1_OvertimeAnnual",
          "logic": "input[annualBonus2] + input[totalOvertimeAnnually2] + input[totalCommissionAnnually2]",
          "new": true
        }
      },
      "Self-employed": {
        "annualIncome2": {
          "css": "#Applicant0_NetProfitMostRecent"
        }
      },
      "Retired": {
        "annualIncome2": {
          "css": "#Applicant1_GrossAnnual"
        }
      },
      "On Contract": {
        "annualIncome2": {
          "css": "#Applicant1_GrossAnnual"
        }
      },
      "Not Employed": {
        "css": "#Applicant1_GrossAnnual",
        "logic": "input[secondJob2] + input[occupationalPension2] + input[drawdownOnPensionFund2] + input[dividendIncome2] + input[investmentIncome2] + input[maintenancePayments2] + input[rentalIncome2] + input[fosteringIncome2] + input[otherIncome2]"
      }
   },
   "click2": "#affCalcForm > div.formContents > div.last > span > input",
   "additionalCommittedExpenditure": {
     "css": "#totalExpenditure"
   },
   "groundRent": {
     "css": "#monthlyGroundRent"
   },
   "otherCommittedPayments": {
     "css": "#monthlyServiceCharge"
   },
   "otherMortgagePayments": {
     "css": "[name='otherMortgages']",
     "logic": "(@value > 0) ? 'Yes' : 'No'",
     "Yes": {
       "css": "#otherMortgagesYes"
     },
     "No": {
       "css": "#otherMortgagesNo"
     }
   },
   "creditCardBalances": {
     "css": "#cardDebtToRemain"
   },
   "monthlyLoanPayments": {
     "css": "#monthlyLoanToRemain"
   },
   "click3": "#affCalcForm > div.formContents > div.last > span > input"
 },
 "extraction": {
   "price": {
     "css": ".results  strong:last"
   }
 }
}
